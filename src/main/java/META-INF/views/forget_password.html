<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Forget password</title>
<link rel="stylesheet"
	href="/webjars/bootstrap/5.3.2/css/bootstrap.min.css">
</head>
<body>
	<div class="container mt-5">
		<div class="row justify-content-center">
			<div class="col-md-6">
				<div class="card">
					<div class="card-body">
						<h2 class="card-title text-center">Forget Password</h2>
						<form>
							<div class="mb-3">
								<label for="username" class="form-label">Username:</label> 
								<input type="text" class="form-control" id="username"
									name="username" required>
							</div>
							<button onclick="sendRequest()" type="button" class="btn btn-primary btn-block">Send
								Reset Password Email</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script th:inline="javascript" defer="defer">
/*<![CDATA[*/
	function sendRequest() {
		const username = document.getElementById("username").value
	       var xhr = new XMLHttpRequest();
		    xhr.open("POST", "/auth/password/" + username, true); 

		    xhr.onreadystatechange = function () {
		        if (xhr.readyState === 4) {
		            if (xhr.status === 200) {
		                // Successful response
		                alert("A password reset email has been sent! Please check you mailbox");
		                
		            } else {
		                console.error("Error adding course");
		            }
		        }
		    };

		    xhr.send();
	}
  /*]]>*/
</script>
</html>